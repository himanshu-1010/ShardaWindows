<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharda uPVC Windows & Doors</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom configuration for Inter font and colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // ADJUSTED COLORS FOR DARK MODE
                        'primary-blue': '#60a5fa', // Lighter Blue for contrast
                        'secondary-gray': '#1a1a1a', // Main dark background (light black)
                        'card-bg': '#262626', // Slightly lighter dark background for cards
                        'accent-green': '#4ade80', // Lighter Green for CTAs
                        'error-red': '#f87171', // Lighter Red
                        'error-bg': '#b91c1c', // Dark Red background
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Ensuring smooth transition for navigation and elements */
        .transition-all { transition: all 0.3s ease-in-out; }

        /* Style for active navigation link */
        .nav-link.active {
            border-bottom: 3px solid #4ade80; /* Accent green underline (lightened) */
            color: #60a5fa; /* Primary blue active link (lightened) */
            font-weight: 600;
        }

        /* Responsive container centering */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* Custom scrollbar styling for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* Darker thumb */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        /* Utility for aspect ratio container */
        .aspect-video-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
        }
        .aspect-video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Logo Text Shadow for a premium look */
        .text-shadow-custom {
            /* Adjusted shadow color for dark mode contrast */
            text-shadow: 1px 1px 3px rgba(96, 165, 250, 0.4); 
        }

        /* --- Logo Animation --- */
        @keyframes color-pulse {
            0% { color: #60a5fa; } /* Start: Primary Blue (lightened) */
            50% { color: #4ade80; } /* Middle: Accent Green (lightened) */
            100% { color: #60a5fa; } /* End: Primary Blue (lightened) */
        }

        .logo-animated {
            animation: color-pulse 4s infinite ease-in-out;
        }
        
        /* --- Custom Background for Home Hero Section (NEW IMAGE: uPVC Detail Exterior) --- */
        .home-hero-bg {
            position: relative; 
            overflow: hidden; 
            min-height: 500px; 
        }
        
        .home-hero-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* UPDATED: New image - Close-up of a modern white uPVC window exterior */
            background-image: url('https://mccoymart.com/post/wp-content/uploads/Top-UPVC-Window-Designs-1.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.35; /* Increased opacity slightly to show detail better */
            z-index: 0; 
            pointer-events: none; 
        }

        /* --- Custom Gradient for Header (DARK MODE) --- */
        .header-bg-gradient {
            background-color: #1a1a1a; /* Fallback */
            /* Using dark shades for the gradient */
            background-image: linear-gradient(to right, #1f2937 0%, #1a1a1a 100%); 
            background-repeat: repeat;
            background-position: left top;
            background-size: 100%;
            transition: background-image 0.5s ease; 
        }

        /* Styling for the chatbot elements */
        .chat-user-bubble {
            background-color: #60a5fa; /* Primary Blue */
            color: white;
            padding: 0.75rem;
            border-radius: 1rem;
            border-bottom-right-radius: 0;
            max-width: 80%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .chat-bot-bubble {
            background-color: #262626; /* Card BG */
            color: #e5e7eb; /* Light Gray */
            padding: 0.75rem;
            border-radius: 1rem;
            border-bottom-left-radius: 0;
            max-width: 80%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            border: 1px solid #374151; /* Darker border for definition */
        }

        /* --- NEW: Style for the first Hero Text Card with Background Image (NEW IMAGE: uPVC Detail Interior) --- */
        .hero-text-card-bg {
            /* UPDATED: New image - Stylish interior close-up showing white uPVC frame profile */
            background-image: url('https://images.pexels.com/photos/17983674/pexels-photo-17983674/free-photo-of-white-window-frame.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750'); 
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .hero-text-card-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Strong dark overlay for maximum text contrast */
            background-color: rgba(0, 0, 0, 0.85); 
            z-index: 1; 
            border-radius: 1rem; /* Match the rounded-2xl of the container */
        }
        /* Ensure content is above the overlay */
        .hero-text-card-bg > * {
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body class="bg-secondary-gray text-gray-300 font-sans">

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 header-bg-gradient shadow-xl">
        <div class="container flex justify-between items-center py-4">
            
            <!-- Logo Section -->
            <div class="flex items-center space-x-3">
                <!-- Placeholder for Generated uPVC Icon Image -->
                <!-- UPDATED: Ensure logo background is dark in dark mode -->
                <div id="upvc-logo-image" class="w-10 h-10 md:w-12 md:h-12 flex items-center justify-center rounded-full shadow-lg p-1 bg-card-bg relative z-10">
                    <!-- Initial content will be a spinner/fallback -->
                </div>
                <h1 class="text-xl md:text-3xl font-extrabold text-primary-blue logo-animated text-shadow-custom">
                    Sharda uPVC Windows
                </h1>
            </div>
            
            <nav id="navbar" class="flex space-x-6 md:space-x-10">
                <!-- UPDATED: Default link color changed to gray-400, hover to gray-200 -->
                <a href="#home" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="home">Home</a>
                <a href="#services" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="services">Services</a>
                <a href="#gallery" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="gallery">Gallery</a>
                <a href="#contact" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="contact">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area - Sections -->
    <main class="py-8">
        <!-- Home Section -->
        <section id="home" class="home-hero-bg container py-16 hidden rounded-3xl shadow-2xl my-8">
            <div class="grid md:grid-cols-2 gap-12 items-center w-full relative z-10">
                <!-- UPDATED: Now uses the new card background image showing uPVC detail -->
                <div class="space-y-6 hero-text-card-bg p-8 rounded-2xl shadow-xl">
                    <span class="text-accent-green font-semibold uppercase tracking-widest">Site-Specific Custom Fabrication</span>
                    <h2 class="text-5xl md:text-6xl font-extrabold text-white leading-tight">
                        Engineered uPVC Windows & Doors, Perfectly Fitted.
                    </h2>
                    <p class="text-xl text-gray-400">
                        At **Sharda uPVC Windows**, we don't just sell windows; we deliver a precise solution. Our process starts with a mandatory, detailed site inspection to ensure every window and door is custom-made for an impeccable fit and superior performance.
                    </p>
                    <a href="#services" class="inline-block px-8 py-3 bg-primary-blue text-white font-semibold rounded-lg shadow-lg hover:bg-primary-blue/90 transition-all">
                        See Our Process
                    </a>
                </div>
                <div class="hidden md:block h-64"></div>
            </div>
            
            <!-- UPDATED: Replaced bg-white/90 with bg-card-bg/90 and updated text colors -->
            <div class="py-16 bg-card-bg/90 rounded-3xl shadow-xl mt-16 p-8 relative z-10 backdrop-blur-sm">
                <h3 class="text-3xl font-bold text-center text-primary-blue mb-10">Why Upgrade to Sharda uPVC?</h3>
                <div class="grid md:grid-cols-4 gap-8 text-center">
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-accent-green mb-3 inline-block">🌡️</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Superior Insulation</h4>
                        <p class="text-gray-400 text-sm">Significantly reduces heat loss, saving up to 30% on energy bills and maintaining comfortable indoor temperatures year-round.</p>
                    </div>
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-primary-blue mb-3 inline-block">🛡️</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Maximum Security</h4>
                        <p class="text-gray-400 text-sm">Reinforced frames and multi-point locking systems provide exceptional resistance against forced entry for complete peace of mind.</p>
                    </div>
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-accent-green mb-3 inline-block">🔇</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Noise Reduction</h4>
                        <p class="text-gray-400 text-sm">The specialized profile structure and double-glazing effectively block external noise, creating a quieter living environment.</p>
                    </div>
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-primary-blue mb-3 inline-block">✨</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Zero Maintenance</h4>
                        <p class="text-gray-400 text-sm">uPVC is highly durable, corrosion-resistant, and never requires sanding or painting—just a simple wipe to look brand new.</p>
                    </div>
                </div>
            </div>

            <div class="py-12 px-8 bg-primary-blue text-white rounded-3xl shadow-2xl mt-16 text-center relative z-10">
                <h3 class="text-3xl font-bold mb-4">Our Promise: Precision, Quality, Guarantee.</h3>
                <p class="text-lg mb-6 max-w-3xl mx-auto">
                    Every Sharda uPVC installation comes with a comprehensive **10-year warranty**, backed by our commitment to site-specific customization and professional installation.
                </p>
                <a href="#contact" class="inline-block px-8 py-3 bg-accent-green text-white font-bold rounded-lg shadow-lg hover:bg-accent-green/90 transition-all transform hover:scale-105">
                    Request Your Free Site Look Today
                </a>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="container py-24 hidden">
            <h2 class="text-4xl font-bold text-center text-primary-blue mb-12">Our Simple 3-Step Process</h2>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-accent-green">
                    <div class="text-4xl text-accent-green mb-4">🔍</div>
                    <h3 class="text-2xl font-semibold text-white mb-3">1. Detailed Site Inspection</h3>
                    <p class="text-gray-400">
                        The foundation of our quality. We personally visit your site to take precise measurements, assess structural requirements, and discuss your specific needs for noise reduction, security, and aesthetics.
                    </p>
                </div>
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-primary-blue">
                    <div class="text-4xl text-primary-blue mb-4">🛠️</div>
                    <h3 class="text-2xl font-semibold text-white mb-3">2. Precision Fabrication</h3>
                    <p class="text-gray-400">
                        Based on the site look, we fabricate your uPVC windows and doors in our facility using high-grade materials and strict quality control standards, ensuring they meet the exact specifications discussed.
                    </p>
                </div>
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-accent-green">
                    <div class="text-4xl text-accent-green mb-4">✅</div>
                    <h3 class="text-2xl font-semibold text-white mb-3">3. Professional Installation</h3>
                    <p class="text-gray-400">
                        Our expert team handles the installation process efficiently and cleanly. The site-specific design guarantees a seamless fit, maximizing energy efficiency and extending the life of your new uPVC products.
                    </p>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="container py-24 hidden">
            <h2 class="text-4xl font-bold text-center text-primary-blue mb-12">Our Work: uPVC Gallery & Videos</h2>
            <p class="text-center text-lg text-gray-400 mb-12">Showcasing the variety and quality of our custom uPVC window and door installations across different properties.</p>
            
            <!-- Image Gallery Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
                <!-- MODIFIED: Replaced broken Pexels link with a dark placeholder image for Patio Door -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="data:image/jpeg;base64,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" 
                         alt="Modern uPVC Patio Door Installation" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Large Modern uPVC Sliding Doors</p>
                </div>
                <!-- MODIFIED: Replaced broken Pexels link with a dark placeholder image for Casement Window -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTap_1Pb2HtjyU8R_Qq2FTI1sjgccuUspp9fQ&s" 
                         alt="uPVC Casement Door Example" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Premium Casement Window</p>
                </div>
                <!-- UPDATED: Existing image for Tilt and Turn Window -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://ik.imagekit.io/xx9wz96aw/Gemini_Generated_Image_l0yj47l0yj47l0yj.png?updatedAt=1759348244447" 
                         alt="uPVC Tilt and Turn Window Example" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Efficient Tilt & Turn Window</p>
                </div>
                <!-- UPDATED: Existing image for Bay Window -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://images.pexels.com/photos/259962/pexels-photo-259962.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" 
                         alt="Large uPVC Bay Window Project" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Large Bay Window Project</p>
                </div>
                <!-- UPDATED: Existing image for Commercial Installation -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://mccoymart.com/post/wp-content/uploads/Top-UPVC-Window-Designs-1.jpg" 
                         alt="uPVC Installation in a commercial office" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Commercial Office Installation</p>
                </div>
                <!-- UPDATED: Existing image for Soundproofing Demonstration -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEkedAXq-Q5r2evA0qWYdR72Rr4U8LY8Ll6w&s" 
                         alt="uPVC Window Soundproofing Demonstration" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Soundproofing Demonstration</p>
                </div>
            </div>

            <!-- Video Section -->
            <h3 class="text-3xl font-bold text-center text-gray-300 mb-8 mt-12">Videos: See Our Work in Action</h3>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg rounded-xl shadow-xl p-6">
                    <div class="aspect-video-container">
                        <iframe 
                            src="https://www.youtube.com/embed/NuBYWUFiuww?rel=0" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen 
                            class="rounded-lg">
                        </iframe>
                    </div>
                    <p class="mt-3 text-lg font-semibold text-gray-200">Our Site Look and Installation Process (2:17 min)</p>
                    <p class="text-sm text-gray-400">A step-by-step guide from initial consultation to final inspection.</p>
                </div>
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg rounded-xl shadow-xl p-6">
                    <div class="aspect-video-container">
                         <iframe 
                            src="https://ik.imagekit.io/xx9wz96aw/WhatsApp%20Video%202025-10-02%20at%2001.30.05_98a42d48.mp4?updatedAt=1759349314239" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen 
                            class="rounded-lg">
                        </iframe>
                    </div>
                    <p class="mt-3 text-lg font-semibold text-gray-200">Key Features of **uPVC Windows**</p>
                    <p class="text-sm text-gray-400">Highlighting insulation, security, and maintenance benefits.</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="container py-24 hidden">
            <h2 class="text-4xl font-bold text-center text-primary-blue mb-12">Get Started with a Site Look</h2>
            
            <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
            <div class="grid md:grid-cols-2 gap-12 bg-card-bg p-8 md:p-12 rounded-xl shadow-2xl">
                <!-- Contact Form -->
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-white">Request a Free Consultation</h3>
                    
                    <form id="contact-form" action="https://formspree.io/f/YOUR_FORMSPREE_ID" method="POST" class="space-y-4">
                        <div>
                            <!-- UPDATED: Text color for labels -->
                            <label for="name" class="block text-sm font-medium text-gray-300">Full Name</label>
                            <!-- UPDATED: Input colors for dark mode -->
                            <input type="text" id="name" name="name" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-300">Email Address</label>
                            <input type="email" id="email" name="email" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-300">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-300">Project Details (e.g., location, window type)</label>
                            <textarea id="message" name="message" rows="4" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50"></textarea>
                        </div>
                        <button type="submit" id="submit-button" class="w-full px-4 py-3 bg-accent-green text-white font-semibold rounded-lg shadow-md hover:bg-accent-green/90 transition-all">
                            Submit Request
                        </button>
                    </form>
                    <!-- UPDATED: Alert background/text colors for dark mode -->
                    <div id="form-message" class="mt-4 p-3 rounded-lg text-center bg-gray-800 text-yellow-400" role="alert">
                        <p class="font-bold">Important:</p> 
                        <p class="text-sm">This form uses Formspree and will redirect to their confirmation page upon successful submission. Replace 'YOUR_FORMSPREE_ID' with your form's actual ID.</p>
                    </div>
                </div>

                <!-- Contact Info -->
                <div class="space-y-6">
                    <h3 class="text-2xl font-semibold text-white">Contact Information</h3>
                    <p class="text-gray-400">
                        We are ready to schedule your complimentary site inspection.
                    </p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="text-accent-green mr-3 mt-1">📞</span>
                            <div>
                                <p class="font-medium">Call Us:</p>
                                <p class="text-primary-blue font-bold text-xl">+91 87501 01290</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <span class="text-accent-green mr-3 mt-1">📧</span>
                            <div>
                                <p class="font-medium">Email Us:</p>
                                <p class="text-primary-blue font-bold">shardawindows@gmail.com</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <span class="text-accent-green mr-3 mt-1">📍</span>
                            <div>
                                <p class="font-medium">Our Location:</p>
                                <p class="text-gray-300">Rohini, Vijay Vihar (New Delhi)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 mt-12">
        <div class="container text-center">
            <p>&copy; 2025 **Sharda uPVC Windows**. All rights reserved. | Specializing in Site-Specific uPVC Solutions.</p>
        </div>
    </footer>

    <!-- Chatbot Implementation -->
    <!-- Floating Chat Button -->
    <div id="chat-button" class="fixed bottom-6 right-6 z-[100] w-14 h-14 bg-accent-green rounded-full shadow-2xl flex items-center justify-center cursor-pointer transition-all hover:scale-105">
        <svg id="chat-icon" class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
    </div>

    <!-- Chat Modal/Container -->
    <div id="chat-modal" class="fixed bottom-24 right-6 w-full max-w-sm h-96 bg-card-bg rounded-xl shadow-2xl flex flex-col hidden z-[100]">
        <!-- Chat Header -->
        <div class="p-4 bg-gray-800 rounded-t-xl flex justify-between items-center border-b border-gray-700">
            <h4 class="text-white font-bold">Sharda Bot</h4>
            <button id="close-chat" class="text-gray-400 text-2xl leading-none hover:text-white transition-colors">&times;</button>
        </div>
        
        <!-- Chat Body -->
        <div id="chat-body" class="flex-1 p-4 overflow-y-auto space-y-4 text-sm">
            <!-- Initial Message -->
            <div class="flex justify-start">
                <div class="chat-bot-bubble">
                    Hello! I'm Sharda Bot, your uPVC expert. How can I assist you with windows, doors, or our site-specific service today?
                </div>
            </div>
        </div>

        <!-- Chat Input -->
        <div class="p-4 border-t border-gray-700 flex items-center bg-gray-800 rounded-b-xl">
            <input type="text" id="chat-input" placeholder="Ask about uPVC, installation, or pricing..." class="flex-1 rounded-l-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-accent-green focus:ring focus:ring-accent-green/50" autocomplete="off">
            <button id="send-chat" class="px-4 py-3 bg-accent-green text-white font-semibold rounded-r-lg hover:bg-accent-green/90 transition-all ml-1 flex-shrink-0" disabled>
                <svg id="send-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5l7 7-7 7"></path></svg>
                <div id="loading-spinner" class="hidden w-5 h-5 border-2 border-white border-t-accent-green rounded-full animate-spin"></div>
            </button>
        </div>
    </div>
    <!-- End Chatbot Implementation -->

    <!-- JavaScript for single-page navigation and Image Generation/Chatbot -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('main section');
            const navLinks = document.querySelectorAll('.nav-link');
            const imageContainer = document.getElementById('upvc-logo-image');
            
            // --- Chatbot Elements and State ---
            const chatModal = document.getElementById('chat-modal');
            const chatButton = document.getElementById('chat-button');
            const closeChatButton = document.getElementById('close-chat');
            const chatBody = document.getElementById('chat-body');
            const chatInput = document.getElementById('chat-input');
            const sendChatButton = document.getElementById('send-chat');
            const loadingSpinner = document.getElementById('loading-spinner');
            const sendIcon = document.getElementById('send-icon');

            let chatHistory = [
                { role: "model", parts: [{ text: "Hello! I'm Sharda Bot, your uPVC expert. How can I assist you with windows, doors, or our site-specific service today?" }] }
            ];
            const geminiApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=`;
            const apiKey = "";
            const systemInstruction = "You are 'Sharda Bot', a friendly, knowledgeable, and professional chatbot for Sharda uPVC Windows & Doors. Your primary purpose is to assist customers with inquiries about uPVC windows, doors, insulation, security features, the 3-step installation process (Site Inspection, Fabrication, Installation), and the 10-year warranty. Use a helpful and concise tone. When asked about general knowledge or external information, use Google Search for grounded answers. Format output in Markdown.";

            // --- Navigation Logic (Existing) ---

            /**
             * Shows the requested section and updates the navigation bar.
             * @param {string} sectionId The ID of the section to show (e.g., 'home').
             */
            function showSection(sectionId) {
                // 1. Hide all sections
                sections.forEach(section => {
                    section.classList.add('hidden');
                });

                // 2. Show the requested section
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                }

                // 3. Update active navigation link styling
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-section') === sectionId) {
                        link.classList.add('active');
                    }
                });
            }

            /**
             * Handles navigation link and URL hash changes.
             */
            function handleNavigation() {
                const hash = window.location.hash.substring(1) || 'home';
                showSection(hash);
            }

            // --- Image Generation Logic (Existing) ---

            /**
             * Calls the Gemini API to generate a uPVC icon and display it in the header as a watermark.
             */
            async function generateAndDisplayLogoImage() {
                const prompt = "A minimalist, premium icon of a modern white uPVC window with a subtle glass reflection, vector art style, transparent background.";
                const header = document.querySelector('header');
            
                // 1. Show Loading State (Spinner) in the logo area
                imageContainer.innerHTML = `
                    <svg class="animate-spin h-6 w-6 text-primary-blue" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                `;
                
                // 2. Setup API Call for gemini-2.5-flash-image-preview
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{
                        parts: [{ text: prompt }]
                    }],
                    generationConfig: {
                        responseModalities: ['TEXT', 'IMAGE']
                    },
                };
            
                let result = null;
                let success = false;
                let retries = 0;
                const maxRetries = 3;
            
                while (!success && retries < maxRetries) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
            
                        if (response.ok) {
                            result = await response.json();
                            success = true;
                        } else {
                            throw new Error(`API returned status ${response.status}`);
                        }
                    } catch (error) {
                        retries++;
                        console.error(`Attempt ${retries} failed to generate image:`, error);
                        if (retries < maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retries) * 1000)); 
                        } else {
                            console.error("Image generation failed after multiple retries:", error);
                        }
                    }
                }
            
                // 3. Process Result (Adapted for generateContent response)
                const base64Data = result?.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;

                if (base64Data) {
                    const imageUrl = `data:image/png;base64,${base64Data}`;
                    
                    // Set as Header Watermark Background
                    header.style.backgroundImage = `
                        url('${imageUrl}'), 
                        linear-gradient(to right, #1f2937 0%, #1a1a1a 100%)
                    `;
                    header.style.backgroundPosition = 'right 1.5rem center, left top'; 
                    header.style.backgroundRepeat = 'no-repeat, repeat';
                    header.style.backgroundSize = '80px, 100%'; 

                    // Reset the primary logo area to the simple fallback icon after generation is complete
                    // UPDATED: Set fallback icon color for dark mode
                    imageContainer.innerHTML = `<span class="text-2xl text-primary-blue">🪟</span>`;

                } else {
                    // Fallback for failure
                    imageContainer.innerHTML = `<span class="text-2xl text-primary-blue">🪟</span>`;
                    console.error("Failed to generate or retrieve image data. Using fallback emoji.");
                }
            }


            // --- Chatbot Functions (New) ---

            /** Renders all messages in the chat history. */
            function renderMessages() {
                chatBody.innerHTML = ''; // Clear previous messages
                chatHistory.forEach(message => {
                    const messageElement = document.createElement('div');
                    const text = message.parts[0].text;
                    
                    if (message.role === 'user') {
                        messageElement.className = 'flex justify-end';
                        messageElement.innerHTML = `<div class="chat-user-bubble">${text}</div>`;
                    } else if (message.role === 'model') {
                        messageElement.className = 'flex justify-start';
                        messageElement.innerHTML = `<div class="chat-bot-bubble">${text.replace(/\n/g, '<br>')}</div>`;
                    }
                    chatBody.appendChild(messageElement);
                });
                // Auto-scroll to the bottom of the chat
                chatBody.scrollTop = chatBody.scrollHeight;
            }

            /**
             * Calls the Gemini API with the full chat history and system instructions.
             * @param {string} userQuery The latest query from the user.
             */
            async function callGeminiApi(userQuery) {
                const historyForApi = chatHistory.map(msg => ({ 
                    role: msg.role, 
                    parts: [{ text: msg.parts[0].text }]
                }));

                const payload = {
                    contents: historyForApi,
                    tools: [{ "google_search": {} }], // Enable Google Search grounding
                    systemInstruction: {
                        parts: [{ text: systemInstruction }]
                    },
                };
                
                let result = null;
                let success = false;
                let retries = 0;
                const maxRetries = 3;

                while (!success && retries < maxRetries) {
                    try {
                        const response = await fetch(geminiApiUrl + apiKey, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.ok) {
                            result = await response.json();
                            success = true;
                        } else {
                            throw new Error(`API returned status ${response.status}`);
                        }
                    } catch (error) {
                        retries++;
                        console.error(`Attempt ${retries} failed to call Gemini API:`, error);
                        if (retries < maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, retries) * 1000));
                        } else {
                            return "Sorry, I'm having trouble connecting right now. Please try again later!";
                        }
                    }
                }

                const responseText = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                return responseText || "I couldn't generate a response. Please rephrase your question.";
            }

            /** Handles the user submitting a message. */
            async function handleChatSubmission() {
                const userQuery = chatInput.value.trim();
                if (!userQuery) return;

                // 1. Disable input/button and show spinner
                chatInput.value = '';
                chatInput.disabled = true;
                sendChatButton.disabled = true;
                sendIcon.classList.add('hidden');
                loadingSpinner.classList.remove('hidden');

                // 2. Add user message to history and render
                chatHistory.push({ role: "user", parts: [{ text: userQuery }] });
                renderMessages();

                // 3. Get bot response
                const botResponseText = await callGeminiApi(userQuery);

                // 4. Add bot response to history and render
                chatHistory.push({ role: "model", parts: [{ text: botResponseText }] });
                renderMessages();

                // 5. Re-enable input/button
                chatInput.disabled = false;
                sendChatButton.disabled = false;
                sendIcon.classList.remove('hidden');
                loadingSpinner.classList.add('hidden');
                chatInput.focus();
            }

            // --- Event Listeners and Initialization ---

            // Navigation listeners (from existing code)
            handleNavigation();
            window.addEventListener('hashchange', handleNavigation);

            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault(); 
                    const targetSectionId = link.getAttribute('data-section');
                    history.pushState(null, null, `#${targetSectionId}`);
                    handleNavigation();
                });
            });
            
            // Chatbot listeners
            chatButton.addEventListener('click', () => {
                chatModal.classList.toggle('hidden');
                if (!chatModal.classList.contains('hidden')) {
                    chatInput.focus();
                }
            });

            closeChatButton.addEventListener('click', () => {
                chatModal.classList.add('hidden');
            });
            
            chatInput.addEventListener('input', () => {
                // Enable button only if there is text in the input
                sendChatButton.disabled = chatInput.value.trim() === '';
            });

            sendChatButton.addEventListener('click', handleChatSubmission);
            
            chatInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter' && !sendChatButton.disabled) {
                    handleChatSubmission();
                }
            });

            // Initial setup calls
            generateAndDisplayLogoImage();
            renderMessages(); // Initial render of the bot's greeting
            
        });
    </script>
</body>
</html>
