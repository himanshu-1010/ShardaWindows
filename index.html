<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharda uPVC Windows & Doors</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom configuration for Inter font and colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // ADJUSTED COLORS FOR DARK MODE
                        'primary-blue': '#60a5fa', // Lighter Blue for contrast
                        'secondary-gray': '#1a1a1a', // Main dark background (light black)
                        'card-bg': '#262626', // Slightly lighter dark background for cards
                        'accent-green': '#4ade80', // Lighter Green for CTAs
                        'error-red': '#f87171', // Lighter Red
                        'error-bg': '#b91c1c', // Dark Red background
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Ensuring smooth transition for navigation and elements */
        .transition-all { transition: all 0.3s ease-in-out; }

        /* Style for active navigation link */
        .nav-link.active {
            border-bottom: 3px solid #4ade80; /* Accent green underline (lightened) */
            color: #60a5fa; /* Primary blue active link (lightened) */
            font-weight: 600;
        }

        /* Responsive container centering */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* Custom scrollbar styling for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* Darker thumb */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        /* Utility for aspect ratio container */
        .aspect-video-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
        }
        .aspect-video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Logo Text Shadow for a premium look */
        .text-shadow-custom {
            /* Adjusted shadow color for dark mode contrast */
            text-shadow: 1px 1px 3px rgba(96, 165, 250, 0.4); 
        }

        /* --- Logo Animation --- */
        @keyframes color-pulse {
            0% { color: #60a5fa; } /* Start: Primary Blue (lightened) */
            50% { color: #4ade80; } /* Middle: Accent Green (lightened) */
            100% { color: #60a5fa; } /* End: Primary Blue (lightened) */
        }

        .logo-animated {
            animation: color-pulse 4s infinite ease-in-out;
        }
        
        /* --- Custom Background for Home Hero Section (NEW IMAGE: uPVC Detail Exterior) --- */
        .home-hero-bg {
            position: relative; 
            overflow: hidden; 
            min-height: 500px; 
        }
        
        .home-hero-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* UPDATED: New image - Close-up of a modern white uPVC window exterior */
            background-image: url('https://mccoymart.com/post/wp-content/uploads/Top-UPVC-Window-Designs-1.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.35; /* Increased opacity slightly to show detail better */
            z-index: 0; 
            pointer-events: none; 
        }

        /* --- Custom Gradient for Header (DARK MODE) --- */
        .header-bg-gradient {
            background-color: #1a1a1a; /* Fallback */
            /* Using dark shades for the gradient */
            background-image: linear-gradient(to right, #1f2937 0%, #1a1a1a 100%); 
            background-repeat: repeat;
            background-position: left top;
            background-size: 100%;
            transition: background-image 0.5s ease; 
        }

        /* Styling for the chatbot elements */
        .chat-user-bubble {
            background-color: #60a5fa; /* Primary Blue */
            color: white;
            padding: 0.75rem;
            border-radius: 1rem;
            border-bottom-right-radius: 0;
            max-width: 80%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .chat-bot-bubble {
            background-color: #262626; /* Card BG */
            color: #e5e7eb; /* Light Gray */
            padding: 0.75rem;
            border-radius: 1rem;
            border-bottom-left-radius: 0;
            max-width: 80%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            border: 1px solid #374151; /* Darker border for definition */
        }

        /* --- NEW: Style for the first Hero Text Card with Background Image (NEW IMAGE: uPVC Detail Interior) --- */
        .hero-text-card-bg {
            /* UPDATED: New image - Stylish interior close-up showing white uPVC frame profile */
            background-image: url('https://images.pexels.com/photos/17983674/pexels-photo-17983674/free-photo-of-white-window-frame.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750'); 
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .hero-text-card-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Strong dark overlay for maximum text contrast */
            background-color: rgba(0, 0, 0, 0.85); 
            z-index: 1; 
            border-radius: 1rem; /* Match the rounded-2xl of the container */
        }
        /* Ensure content is above the overlay */
        .hero-text-card-bg > * {
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body class="bg-secondary-gray text-gray-300 font-sans">

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 header-bg-gradient shadow-xl">
        <div class="container flex justify-between items-center py-4">
            
            <!-- Logo Section -->
            <div class="flex items-center space-x-3">
                <!-- Placeholder for Generated uPVC Icon Image -->
                <!-- UPDATED: Ensure logo background is dark in dark mode -->
                <div id="upvc-logo-image" class="w-10 h-10 md:w-12 md:h-12 flex items-center justify-center rounded-full shadow-lg p-1 bg-card-bg relative z-10">
                    <!-- Initial content will be a spinner/fallback -->
                </div>
                <h1 class="text-xl md:text-3xl font-extrabold text-primary-blue logo-animated text-shadow-custom">
                    Sharda uPVC Windows
                </h1>
            </div>
            
            <nav id="navbar" class="flex space-x-6 md:space-x-10">
                <!-- UPDATED: Default link color changed to gray-400, hover to gray-200 -->
                <a href="#home" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="home">Home</a>
                <a href="#services" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="services">Services</a>
                <a href="#gallery" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="gallery">Gallery</a>
                <a href="#contact" class="nav-link text-lg text-gray-400 hover:text-gray-200 transition-all" data-section="contact">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area - Sections -->
    <main class="py-8">
        <!-- Home Section -->
        <section id="home" class="home-hero-bg container py-16 hidden rounded-3xl shadow-2xl my-8">
            <div class="grid md:grid-cols-2 gap-12 items-center w-full relative z-10">
                <!-- UPDATED: Now uses the new card background image showing uPVC detail -->
                <div class="space-y-6 hero-text-card-bg p-8 rounded-2xl shadow-xl">
                    <span class="text-accent-green font-semibold uppercase tracking-widest">Site-Specific Custom Fabrication</span>
                    <h2 class="text-5xl md:text-6xl font-extrabold text-white leading-tight">
                        Engineered uPVC Windows & Doors, Perfectly Fitted.
                    </h2>
                    <p class="text-xl text-gray-400">
                        At **Sharda uPVC Windows**, we don't just sell windows; we deliver a precise solution. Our process starts with a mandatory, detailed site inspection to ensure every window and door is custom-made for an impeccable fit and superior performance.
                    </p>
                    <a href="#services" class="inline-block px-8 py-3 bg-primary-blue text-white font-semibold rounded-lg shadow-lg hover:bg-primary-blue/90 transition-all">
                        See Our Process
                    </a>
                </div>
                <div class="hidden md:block h-64"></div>
            </div>
            
            <!-- UPDATED: Replaced bg-white/90 with bg-card-bg/90 and updated text colors -->
            <div class="py-16 bg-card-bg/90 rounded-3xl shadow-xl mt-16 p-8 relative z-10 backdrop-blur-sm">
                <h3 class="text-3xl font-bold text-center text-primary-blue mb-10">Why Upgrade to Sharda uPVC?</h3>
                <div class="grid md:grid-cols-4 gap-8 text-center">
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-accent-green mb-3 inline-block">üå°Ô∏è</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Superior Insulation</h4>
                        <p class="text-gray-400 text-sm">Significantly reduces heat loss, saving up to 30% on energy bills and maintaining comfortable indoor temperatures year-round.</p>
                    </div>
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-primary-blue mb-3 inline-block">üõ°Ô∏è</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Maximum Security</h4>
                        <p class="text-gray-400 text-sm">Reinforced frames and multi-point locking systems provide exceptional resistance against forced entry for complete peace of mind.</p>
                    </div>
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-accent-green mb-3 inline-block">üîá</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Noise Reduction</h4>
                        <p class="text-gray-400 text-sm">The specialized profile structure and double-glazing effectively block external noise, creating a quieter living environment.</p>
                    </div>
                    <!-- UPDATED: Replaced bg-white with bg-card-bg -->
                    <div class="p-4 rounded-xl bg-card-bg shadow-lg transition-all duration-300 transform hover:scale-[1.03] hover:shadow-2xl cursor-pointer hover:bg-gray-800">
                        <span class="text-5xl text-primary-blue mb-3 inline-block">‚ú®</span>
                        <h4 class="text-xl font-semibold text-white mb-2">Zero Maintenance</h4>
                        <p class="text-gray-400 text-sm">uPVC is highly durable, corrosion-resistant, and never requires sanding or painting‚Äîjust a simple wipe to look brand new.</p>
                    </div>
                </div>
            </div>

            <div class="py-12 px-8 bg-primary-blue text-white rounded-3xl shadow-2xl mt-16 text-center relative z-10">
                <h3 class="text-3xl font-bold mb-4">Our Promise: Precision, Quality, Guarantee.</h3>
                <p class="text-lg mb-6 max-w-3xl mx-auto">
                    Every Sharda uPVC installation comes with a comprehensive **10-year warranty**, backed by our commitment to site-specific customization and professional installation.
                </p>
                <a href="#contact" class="inline-block px-8 py-3 bg-accent-green text-white font-bold rounded-lg shadow-lg hover:bg-accent-green/90 transition-all transform hover:scale-105">
                    Request Your Free Site Look Today
                </a>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="container py-24 hidden">
            <h2 class="text-4xl font-bold text-center text-primary-blue mb-12">Our Simple 3-Step Process</h2>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-accent-green">
                    <div class="text-4xl text-accent-green mb-4">üîç</div>
                    <h3 class="text-2xl font-semibold text-white mb-3">1. Detailed Site Inspection</h3>
                    <p class="text-gray-400">
                        The foundation of our quality. We personally visit your site to take precise measurements, assess structural requirements, and discuss your specific needs for noise reduction, security, and aesthetics.
                    </p>
                </div>
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-primary-blue">
                    <div class="text-4xl text-primary-blue mb-4">üõ†Ô∏è</div>
                    <h3 class="text-2xl font-semibold text-white mb-3">2. Precision Fabrication</h3>
                    <p class="text-gray-400">
                        Based on the site look, we fabricate your uPVC windows and doors in our facility using high-grade materials and strict quality control standards, ensuring they meet the exact specifications discussed.
                    </p>
                </div>
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all border-t-4 border-accent-green">
                    <div class="text-4xl text-accent-green mb-4">‚úÖ</div>
                    <h3 class="text-2xl font-semibold text-white mb-3">3. Professional Installation</h3>
                    <p class="text-gray-400">
                        Our expert team handles the installation process efficiently and cleanly. The site-specific design guarantees a seamless fit, maximizing energy efficiency and extending the life of your new uPVC products.
                    </p>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="container py-24 hidden">
            <h2 class="text-4xl font-bold text-center text-primary-blue mb-12">Our Work: uPVC Gallery & Videos</h2>
            <p class="text-center text-lg text-gray-400 mb-12">Showcasing the variety and quality of our custom uPVC window and door installations across different properties.</p>
            
            <!-- Image Gallery Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
                <!-- MODIFIED: Replaced broken Pexels link with a dark placeholder image for Patio Door -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="data:image/jpeg;base64,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" 
                                 alt="Modern uPVC Patio Door Installation" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Large Modern uPVC Sliding Doors</p>
                </div>
                <!-- MODIFIED: Replaced broken Pexels link with a dark placeholder image for Casement Window -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTap_1Pb2HtjyU8R_Qq2FTI1sjgccuUspp9fQ&s" 
                                 alt="uPVC Casement Door Example" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Premium Casement Window</p>
                </div>
                <!-- UPDATED: Existing image for Tilt and Turn Window -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://ik.imagekit.io/xx9wz96aw/Gemini_Generated_Image_l0yj47l0yj47l0yj.png?updatedAt=1759348244447" 
                                 alt="uPVC Tilt and Turn Window Example" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Efficient Tilt & Turn Window</p>
                </div>
                <!-- UPDATED: Existing image for Bay Window -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://images.pexels.com/photos/259962/pexels-photo-259962.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" 
                                 alt="Large uPVC Bay Window Project" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Large Bay Window Project</p>
                </div>
                <!-- UPDATED: Existing image for Commercial Installation -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://mccoymart.com/post/wp-content/uploads/Top-UPVC-Window-Designs-1.jpg" 
                                 alt="uPVC Installation in a commercial office" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Commercial Office Installation</p>
                </div>
                <!-- UPDATED: Existing image for Soundproofing Demonstration -->
                <div class="bg-card-bg rounded-xl overflow-hidden shadow-xl">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEkedAXq-Q5r2evA0qWYdR72Rr4U8LY8Ll6w&s" 
                                 alt="uPVC Window Soundproofing Demonstration" class="w-full h-48 object-cover">
                    <p class="p-4 font-semibold text-gray-200">Soundproofing Demonstration</p>
                </div>
            </div>

            <!-- Video Section -->
            <h3 class="text-3xl font-bold text-center text-gray-300 mb-8 mt-12">Videos: See Our Work in Action</h3>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg rounded-xl shadow-xl p-6">
                    <div class="aspect-video-container">
                        <iframe 
                            src="https://www.youtube.com/embed/NuBYWUFiuww?rel=0" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen 
                            class="rounded-lg">
                        </iframe>
                    </div>
                    <p class="mt-3 text-lg font-semibold text-gray-200">Our Site Look and Installation Process (2:17 min)</p>
                    <p class="text-sm text-gray-400">A step-by-step guide from initial consultation to final inspection.</p>
                </div>
                <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
                <div class="bg-card-bg rounded-xl shadow-xl p-6">
                    <div class="aspect-video-container">
                        <iframe 
                            src="https://ik.imagekit.io/xx9wz96aw/WhatsApp%20Video%202025-10-02%20at%2001.30.05_98a42d48.mp4?updatedAt=1759349314239" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen 
                            class="rounded-lg">
                        </iframe>
                    </div>
                    <p class="mt-3 text-lg font-semibold text-gray-200">Key Features of **uPVC Windows**</p>
                    <p class="text-sm text-gray-400">Highlighting insulation, security, and maintenance benefits.</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="container py-24 hidden">
            <h2 class="text-4xl font-bold text-center text-primary-blue mb-12">Get Started with a Site Look</h2>
            
            <!-- UPDATED: Replaced bg-white with bg-card-bg and updated text colors -->
            <div class="grid md:grid-cols-2 gap-12 bg-card-bg p-8 md:p-12 rounded-xl shadow-2xl">
                <!-- Contact Form -->
                <div>
                    <h3 class="text-2xl font-semibold mb-4 text-white">Request a Free Consultation</h3>
                    
                    <form id="contact-form" action="https://formspree.io/f/YOUR_FORMSPREE_ID" method="POST" class="space-y-4">
                        <div>
                            <!-- UPDATED: Text color for labels -->
                            <label for="name" class="block text-sm font-medium text-gray-300">Full Name</label>
                            <!-- UPDATED: Input colors for dark mode -->
                            <input type="text" id="name" name="name" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                        </div>
                        <!-- CLOSING THE INCOMPLETE SNIPPET AND ADDING MISSING FIELDS -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-300">Email Address</label>
                            <input type="email" id="email" name="email" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-300">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-300">Project Details</label>
                            <textarea id="message" name="message" rows="4" required class="mt-1 block w-full rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-3 border focus:border-primary-blue focus:ring focus:ring-primary-blue/50"></textarea>
                        </div>
                        <button type="submit" class="w-full px-4 py-3 bg-accent-green text-white font-bold rounded-lg shadow-md hover:bg-accent-green/90 transition-all transform hover:scale-[1.01]">
                            Send Request & Get a Quote
                        </button>
                    </form>
                </div>
                <!-- Contact Details -->
                <div class="space-y-6">
                    <h3 class="text-2xl font-semibold mb-4 text-white">Direct Contact</h3>
                    <div class="flex items-start space-x-4">
                        <span class="text-primary-blue text-2xl mt-1">üìû</span>
                        <div>
                            <p class="font-medium text-lg text-white">Call Us Directly</p>
                            <p class="text-gray-400">8750101290</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <span class="text-primary-blue text-2xl mt-1">üìß</span>
                        <div>
                            <p class="font-medium text-lg text-white">Email</p>
                            <p class="text-gray-400">info@shardaupvc.com</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <span class="text-primary-blue text-2xl mt-1">üìç</span>
                        <div>
                            <p class="font-medium text-lg text-white">Address</p>
                            <p class="text-gray-400">Plot No. 12, Industrial Area, Noida - 201301</p>
                        </div>
                    </div>
                    <div class="aspect-video-container mt-8">
                        <!-- Placeholder for a simple map location (using a placeholder image) -->
                        <img src="https://placehold.co/600x400/262626/60a5fa?text=Map+Location+Placeholder" alt="Map Location Placeholder" class="rounded-xl shadow-lg w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-400 py-6 mt-12">
        <div class="container text-center text-sm">
            <p>&copy; 2024 Sharda uPVC Windows & Doors. All rights reserved.</p>
            <p class="mt-1">Engineered for quality, designed for you.</p>
        </div>
    </footer>

    <!-- Floating Action Buttons Container (Fixed to bottom right) -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end space-y-3">
        <!-- 1. WhatsApp Button (NEW) -->
        <a href="https://wa.me/8750101290" target="_blank" 
           class="flex items-center justify-center w-14 h-14 bg-[#25D366] text-white rounded-full shadow-2xl transition-all transform hover:scale-110 active:scale-95 duration-200"
           aria-label="Chat with us on WhatsApp">
            <!-- WhatsApp Icon (Inline SVG) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" class="w-7 h-7">
                <path d="M12.012 0C5.385 0 0 5.39 0 12.007c0 2.006.52 3.903 1.503 5.564L.085 24l6.634-1.75c1.554.856 3.328 1.303 5.302 1.303 6.617 0 12.008-5.39 12.008-12.007C24.029 5.39 18.638 0 12.012 0zM17.43 14.965c-.173-.284-.633-.518-.908-.638-.283-.122-.497-.184-.712.184-.216.368-.83.83-1.016.993-.186.164-.37.245-.694.122-.323-.122-1.365-.497-2.607-1.61-1.077-.947-1.796-2.12-2.007-2.488-.211-.367-.024-.567.147-.73.166-.164.368-.426.554-.639.186-.212.247-.368.369-.613.121-.245.06-.459-.06-.613-.122-.153-.712-1.72-.97-2.35-.257-.63-.516-.518-.71-.518-.216 0-.462-.03-.714-.03-.252 0-.66.082-.992.41-.322.327-1.236 1.205-1.236 2.934 0 1.73 1.272 3.39 1.458 3.615.186.225 2.404 3.67 5.766 5.006 3.36 1.336 3.36 1.01 3.978.948.616-.062 1.99-1.213 2.264-2.37.273-1.157.273-2.146.182-2.358-.093-.212-.28-.328-.485-.436z"></path>
            </svg>
        </a>
        <!-- 2. Chatbot Button (Existing/Placeholder) -->
        <button id="chat-toggle" 
                class="flex items-center justify-center w-14 h-14 bg-primary-blue text-white rounded-full shadow-2xl transition-all transform hover:scale-110 active:scale-95 duration-200"
                aria-label="Open Chatbot">
            <!-- Chat Icon (Inline SVG - Placeholder for lucide:message-square) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
        </button>
    </div>


    <div id="chat-window" class="fixed bottom-24 right-6 w-80 h-96 bg-card-bg rounded-xl shadow-2xl flex flex-col hidden z-50 border border-gray-700">
        <div class="p-4 bg-primary-blue rounded-t-xl flex justify-between items-center">
            <h4 class="text-white font-bold">Sharda Assistant</h4>
            <button onclick="document.getElementById('chat-window').classList.add('hidden')" class="text-white hover:text-gray-200">
                <!-- Close Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
        </div>
        <div id="chat-messages" class="flex-grow p-4 space-y-4 overflow-y-auto">
            <div class="flex justify-start">
                <div class="chat-bot-bubble">Welcome to Sharda uPVC! How can I assist you with your window and door project today?</div>
            </div>
        </div>
        <div class="p-4 border-t border-gray-700">
            <div class="flex space-x-2">
                <input type="text" id="chat-input" placeholder="Ask about uPVC, quotes, or installation..." 
                       class="flex-grow rounded-lg border-gray-600 bg-gray-700 text-white shadow-sm p-2 text-sm focus:border-primary-blue focus:ring focus:ring-primary-blue/50">
                <button id="send-btn" class="bg-accent-green text-white p-2 rounded-lg hover:bg-accent-green/90 transition-all">
                    <!-- Send Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>
                </button>
            </div>
            <p id="chat-error-message" class="text-error-red text-xs mt-1 hidden">Please wait while the AI responds.</p>
        </div>
    </div>
    
    <!-- JavaScript for Navigation, Chatbot, and API Interaction -->
    <script>
        const apiKey = ""; // API Key is provided by the canvas environment
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        // --- Utility Functions ---

        /** Converts a base64 string to a Blob */
        function b64toBlob(b64Data, contentType = '', sliceSize = 512) {
            const byteCharacters = atob(b64Data);
            const byteArrays = [];
            for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                const slice = byteCharacters.slice(offset, offset + sliceSize);
                const byteNumbers = new Array(slice.length);
                for (let i = 0; i < slice.length; i++) {
                    byteNumbers[i] = slice.charCodeAt(i);
                }
                byteArrays.push(new Uint8Array(byteNumbers));
            }
            return new Blob(byteArrays, {type: contentType});
        }
        
        /** Retry logic for fetch requests */
        async function fetchWithRetry(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) {
                        // Throw error to trigger retry if non-OK response (e.g., 429 too many requests)
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000; // Exponential backoff: 1s, 2s, 4s...
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        throw error; // Re-throw the error after max retries
                    }
                }
            }
        }

        // --- API Calls ---

        /** Generate a uPVC Icon using Imagen */
        async function generateLogo() {
            const prompt = "A stylized, modern, simple, clean icon representing a white uPVC window frame with a subtle reflection of blue sky, suitable for a logo.";
            const imagenApiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;
            const logoContainer = document.getElementById('upvc-logo-image');
            
            // Set initial spinner/loading state
            logoContainer.innerHTML = `<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary-blue"></div>`;

            const payload = { 
                instances: [{ prompt: prompt }], 
                parameters: { "sampleCount": 1, "aspectRatio": "1:1" } 
            };
            
            try {
                const response = await fetchWithRetry(imagenApiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const base64Data = result?.predictions?.[0]?.bytesBase64Encoded;

                if (base64Data) {
                    const imageUrl = `data:image/png;base64,${base64Data}`;
                    logoContainer.innerHTML = `<img src="${imageUrl}" alt="uPVC Logo Icon" class="w-full h-full object-cover rounded-full">`;
                } else {
                    console.error("Image generation failed:", result);
                    logoContainer.innerHTML = `<span class="text-primary-blue text-xl font-bold">W</span>`; // Fallback Text
                }
            } catch (error) {
                console.error("Error generating logo image:", error);
                logoContainer.innerHTML = `<span class="text-primary-blue text-xl font-bold">W</span>`; // Fallback Text
            }
        }

        /** Call Gemini to get a chatbot response */
        async function getChatResponse(userMessage, history) {
            const systemPrompt = "You are a friendly and knowledgeable sales assistant for Sharda uPVC Windows & Doors. Your primary goal is to provide accurate information about uPVC products, their benefits (insulation, security, low maintenance), and the company's 3-step process (Site Inspection, Fabrication, Installation). Keep responses concise and encourage the user to request a site visit or contact 8750101290.";
            
            const chatHistory = history.map(msg => ({ 
                role: msg.role === 'user' ? 'user' : 'model', 
                parts: [{ text: msg.text }] 
            }));
            
            chatHistory.push({ role: 'user', parts: [{ text: userMessage }] });

            const payload = {
                contents: chatHistory,
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            
            try {
                const response = await fetchWithRetry(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                const text = result?.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, I am having trouble connecting right now. Please try again or call 8750101290.";
                return text;

            } catch (error) {
                console.error("Gemini API call failed:", error);
                return "I encountered an error connecting to the service. Please try again or contact us directly at 8750101290.";
            }
        }

        // --- Application Logic ---
        
        // Chat state
        let chatHistory = [];
        let isTyping = false;

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Initial actions
            generateLogo(); // Generate logo on load

            // 2. Navigation handling
            const sections = {
                'home': document.getElementById('home'),
                'services': document.getElementById('services'),
                'gallery': document.getElementById('gallery'),
                'contact': document.getElementById('contact'),
            };

            const navLinks = document.querySelectorAll('.nav-link');

            function showSection(sectionId) {
                Object.keys(sections).forEach(id => {
                    sections[id].classList.add('hidden');
                });
                if (sections[sectionId]) {
                    sections[sectionId].classList.remove('hidden');
                }
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-section') === sectionId) {
                        link.classList.add('active');
                    }
                });
            }

            // Set initial active section
            const initialSection = window.location.hash.substring(1) || 'home';
            showSection(initialSection);

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.getAttribute('data-section');
                    window.location.hash = sectionId;
                    showSection(sectionId);
                });
            });

            // Handle back/forward navigation
            window.addEventListener('hashchange', () => {
                const hash = window.location.hash.substring(1);
                showSection(hash || 'home');
            });
            
            // 3. Chatbot implementation
            const chatToggle = document.getElementById('chat-toggle');
            const chatWindow = document.getElementById('chat-window');
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-btn');
            const chatMessages = document.getElementById('chat-messages');
            const chatErrorMessage = document.getElementById('chat-error-message');

            chatToggle.addEventListener('click', () => {
                chatWindow.classList.toggle('hidden');
                if (!chatWindow.classList.contains('hidden')) {
                    chatInput.focus();
                }
            });

            function appendMessage(text, role) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('flex', role === 'user' ? 'justify-end' : 'justify-start');
                
                const bubble = document.createElement('div');
                bubble.classList.add(role === 'user' ? 'chat-user-bubble' : 'chat-bot-bubble');
                bubble.innerText = text;
                
                messageDiv.appendChild(bubble);
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom
            }

            function handleSendMessage() {
                const userMessage = chatInput.value.trim();
                if (!userMessage || isTyping) return;

                // 1. Display user message
                appendMessage(userMessage, 'user');
                chatInput.value = '';
                isTyping = true;
                chatErrorMessage.classList.add('hidden'); // Clear error message

                // Add to history
                chatHistory.push({ role: 'user', text: userMessage });

                // 2. Display typing indicator (Placeholder)
                const typingDiv = document.createElement('div');
                typingDiv.classList.add('flex', 'justify-start');
                typingDiv.innerHTML = `<div id="typing-indicator" class="chat-bot-bubble">
                                            <div class="flex space-x-1">
                                                <div class="w-2 h-2 bg-gray-400 rounded-full animate-pulse"></div>
                                                <div class="w-2 h-2 bg-gray-400 rounded-full animate-pulse" style="animation-delay: 0.2s;"></div>
                                                <div class="w-2 h-2 bg-gray-400 rounded-full animate-pulse" style="animation-delay: 0.4s;"></div>
                                            </div>
                                        </div>`;
                chatMessages.appendChild(typingDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;


                // 3. Get AI response
                getChatResponse(userMessage, chatHistory.slice(0, -1)).then(botResponse => {
                    // 4. Remove typing indicator
                    typingDiv.remove();

                    // 5. Display bot message
                    appendMessage(botResponse, 'bot');
                    
                    // Add to history
                    chatHistory.push({ role: 'bot', text: botResponse });

                }).catch(error => {
                    typingDiv.remove();
                    chatErrorMessage.innerText = "Error: Could not get a response. Try again.";
                    chatErrorMessage.classList.remove('hidden');
                    console.error("Chat error:", error);
                }).finally(() => {
                    isTyping = false;
                });
            }

            sendButton.addEventListener('click', handleSendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleSendMessage();
                }
            });

            // 4. Form Submission Handling (Prevent actual submission in Canvas)
            const contactForm = document.getElementById('contact-form');
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                // In a real application, you would submit the data to the server here.
                // For this environment, we just show a successful message.
                
                // Temporarily disable button and show success
                const submitBtn = contactForm.querySelector('button[type="submit"]');
                submitBtn.disabled = true;
                submitBtn.innerText = 'Request Sent!';
                submitBtn.classList.remove('bg-accent-green', 'hover:bg-accent-green/90');
                submitBtn.classList.add('bg-primary-blue');

                setTimeout(() => {
                    submitBtn.disabled = false;
                    submitBtn.innerText = 'Send Request & Get a Quote';
                    submitBtn.classList.add('bg-accent-green', 'hover:bg-accent-green/90');
                    submitBtn.classList.remove('bg-primary-blue');
                    
                    // Clear form after delay
                    contactForm.reset();
                }, 3000);
            });
        });

    </script>
</body>
</html>
